{% extends "gerente.html" %}
{% load static %}

{% block 'head' %}
<link rel="stylesheet" href="{% static 'usuarios/css/telaprincipal.css' %}">
<link rel="stylesheet" href="{% static 'gerenciamento/css/gerenciamento.css' %}">
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
{% endblock %}

{% block 'dashboard' %}
<body>
    <!--main-->
    <div class="main">
        <!--Main navbar-->
        <div class="main-navbar">
            <ion-icon class="menu-toggle" name="menu-outline"></ion-icon>

            <div class="search">
                <form id="pesquisa-produto" method="GET" action="{% url 'pesquisar_produto' %}">
                    <input type="text" placeholder="Pesquisar" name="Pesquisar" value="{{termo_pesquisa}}">
                    <button class="search-btn">Pesquisar</button>
                </form>
            </div>

            <div class="profile">
                <a class="cart" href="{% url 'carrinho' %}"><ion-icon name="cart-outline"></ion-icon></a>
                <p id="cart-total">{{carrinho_itens|floatformat:0}}</p>
            </div>
            

            <!-- Container do Carrinho -->
            <div id="carrinho-container" class="carrinho-popup" style="display: none;">
                <h2>Seu Carrinho</h2>
                <ul id="produtos-carrinho">
                    <!-- Lista de produtos no carrinho serÃ¡ atualizada dinamicamente com JavaScript -->
                </ul>
            </div>
        </div>
        <!--Menu-->
        <br>
        <br>
        <div class="main-menus">
            <!--List of food-->
            <div class="main-detail">
                <h2 class="main-title">Resultados da Pesquisa</h2>
                <div class="detail-wrapper">
                    {% for produto in resultados %}
                    <div class="detail-card produto-card {{ produto.categoria }}" >
                        <span class="detail-icon" onclick="expandirProduto('{{produto.id_produto}}', '{{produto.imageURL}}', '{{produto.nome_produto}}', '{{produto.descricao}}', '{{produto.preco}}')">
                            <img class="detail-img" src="{{ produto.imagem.url }}" alt="{{ produto.nome_produto }}">
                        </span>
                        <div class="detail-desc">
                            <div class="detail-name">
                                <h4>{{produto.nome_produto}}</h4>
                                <p class="detail-sub">{{produto.descricao}}</p>
                                <p class="price">R$ {{produto.preco|floatformat:2}}</p>
                            </div>
                        </div>
                        <div class="row">
                            <button type="button" data-produto="{{produto.id_produto}}" data-action="add" class="btn botao-add-carrinho add-btn update-cart">Add ao Carrinho</button>
                        </div>
                    </div> 
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>


</body>

<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<!-- javascript-->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="{% static 'usuarios/js/principal.js' %}"></script>
<script src="{% static 'gerenciamento/js/gerenciamento.js' %}"></script>
{% endblock %}